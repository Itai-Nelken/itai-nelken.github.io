<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <title>My script templates</title>
    <!--stylesheet-->
    <link rel="stylesheet" href="style.css" />
    <!--style-->
    <style>

    </style>
  </head>
  <body>
    <div class="navbar"> <a
      href="https://itai-nelken.github.io/index.html">Back to main page</a>
    </div>
  <br>
  <br>
  <h1>My script templates and more</h1>

<p><br></p>

<h2 id="toc_1">Quick uninstall script template</h2>

<p><strong>NOTES:</strong><br>- change <code>APP</code> with the name of the app<br>- change <code>command 1</code>, <code>command 2</code> etc. with the commands to you want to run.</p>

<div><pre><code class="language-bash">#!/bin/bash

##########################################################
# script by Itai-Nelken - https://github.com/Itai-Nelken #
##########################################################

echo &quot;uninstalling APP...&quot;
command 1
command 2
command 3

read -p &quot;do you want to DO SOMETHING (y/n)?&quot; choice
case &quot;$choice&quot; in 
  y|Y ) command 4 ;;
  n|N ) command 5 ;;
  * ) echo &quot;invalid&quot;;;
esac
echo &quot;DONE!&quot;</code></pre></div>

<h2 id="toc_2">Quick install script template</h2>

<p><strong>NOTES:</strong><br>- change <code>APP</code> with the name of the app<br>- change <code>command 1</code>, <code>command 2</code> etc. with the commands to you want to run.</p>

<div><pre><code class="language-bash">#!/bin/bash

##########################################################
# script by Itai-Nelken - https://github.com/Itai-Nelken #
##########################################################

echo &quot;installing APP...&quot;

#determine if host system is 64 bit arm64 or 32 bit armhf
if [ ! -z &quot;$(file &quot;$(readlink -f &quot;/sbin/init&quot;)&quot; | grep 64)&quot; ];then
  #install 64bit version
  echo &quot;installing arm64 version...&quot;
  commands 1
  command 2
elif [ ! -z &quot;$(file &quot;$(readlink -f &quot;/sbin/init&quot;)&quot; | grep 32)&quot; ];then
  #install 32bit version
  echo &quot;installing armhf version...&quot;
  command 3
  command 4
else
  echo -e &quot;$(tput setaf 1)$(tput bold)Can&#39;t detect OS architecture! something is very wrong!$(tput sgr 0)&quot;
  exit
fi
echo &quot;DONE!&quot;</code></pre></div>

<h2 id="toc_3">Example for checking if package is installed, if yes install it else do something else. <code>command -v</code> works as well.</h2>

<p><strong>NOTES:</strong><br>- change <code>PACKAGE</code> with real package name.<br>- change <code>sudo apt install -y PACKAGE</code> with any commands needed to install the package.</p>

<div><pre><code class="language-bash">if ! command -v PACKAGE &gt; /dev/null; then
   sudo apt install -y PACKAGE
else
    echo &quot;PACKAGE already installed...&quot;
fi</code></pre></div>

<h2 id="toc_4">Example functions for Downloading .deb files from latest github release</h2>

<p><strong>NOTES:</strong><br>- example: change *.armv7l.deb to *.txt to download only <code>.txt</code> files from latest release.</p>

<p><strong>armv7l:</strong></p>

<div><pre><code class="language-bash">function download_latest_release_armhf() {
  echo &quot;Downloading latest armhf release...&quot;
  curl -s https://api.github.com/repos/$1/releases/latest \
  | grep &quot;browser_download_url.*armv7l.deb&quot; \
  | cut -d : -f 2,3 \
  | tr -d \&quot; \
  | wget -qi -
}</code></pre></div>

<p><strong>arm64:</strong></p>

<div><pre><code class="language-bash">function download_latest_release_arm64() {
  echo &quot;Downloading latest arm64 release...&quot;
  curl -s https://api.github.com/repos/$1/releases/latest \
  | grep &quot;browser_download_url.*armv64.deb&quot; \
  | cut -d : -f 2,3 \
  | tr -d \&quot; \
  | wget -qi -
}</code></pre></div>

<p><strong>Usage:</strong>
<code>$ download_latest_release_ARCH &quot;github-user-name/repo-name&quot;</code>
change ARCH with or armv7l or arm64 depending on function you want to use</p>

<div><pre><code class="language-bash">#determine if host system is 64 bit arm64 or 32 bit armhf
if [ ! -z &quot;$(file &quot;$(readlink -f &quot;/sbin/init&quot;)&quot; | grep 64)&quot; ];then
  arch=64
elif [ ! -z &quot;$(file &quot;$(readlink -f &quot;/sbin/init&quot;)&quot; | grep 32)&quot; ];then
  arch=32
else
  error &quot;Failed to detect OS CPU architecture! Something is very wrong.&quot;
fi</code></pre></div>

<h2 id="toc_5">Example updater for project on github</h2>

<p><strong>NOTES:</strong><br>- change <code>$DIRECTORY</code> to your projects local folder cloned with git.<br>- change <code>GITHUB-USER-NAME</code> with your actual github user name<br>- change <code>repo-name</code> &amp; <code>REPO-NAME</code> with your repo&#39;s name.<br>- error function is the function that prints errors in red and exits.<br></p>

<div><pre><code class="language-bash">
#!/bin/bash

#error function
function error {
  echo -e &quot;\e[91m$1\e[39m&quot;
  exit 1
}

echo &quot;Checking for updates...&quot;
cd $DIRECTORY
localhash=&quot;$(git rev-parse HEAD)&quot;
latesthash=&quot;$(git ls-remote https://github.com/GITHUB-USER-NAME/repo-name HEAD | awk &#39;{print $1}&#39;)&quot;

if [ &quot;$localhash&quot; != &quot;$latesthash&quot; ] &amp;&amp; [ ! -z &quot;$latesthash&quot; ] &amp;&amp; [ ! -z &quot;$localhash&quot; ];then
    echo &quot;Out of date, updating now...&quot;
    git clean -fd
    git reset --hard
    git pull https://github.com/GITHUB-USER-NAME/REPO-NAME.git HEAD || error &#39;Unable to update, please check your internet connection&#39;
else
    echo &quot;Up to date.&quot;
fi</code></pre></div>




</body>

</html>
